#!/bin/sh
# Zennè¨˜äº‹ã®MarkdownLintãƒã‚§ãƒƒã‚¯ï¼ˆpre-commit hookï¼‰

echo "ğŸ” Markdownlintãƒã‚§ãƒƒã‚¯ä¸­..."

# articlesãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¤‰æ›´ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
if git diff --cached --name-only | grep -q "^articles/.*\.md$"; then
    # Lintã‚’å®Ÿè¡Œ
    npm run lint:md
    
    LINT_RESULT=$?
    
    if [ $LINT_RESULT -ne 0 ]; then
        echo ""
        echo "âŒ Markdownlintã‚¨ãƒ©ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ"
        echo ""
        echo "ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§è‡ªå‹•ä¿®æ­£ã‚’è©¦ã—ã¦ãã ã•ã„ï¼š"
        echo "  npm run lint:md:fix"
        echo ""
        echo "ä¿®æ­£å¾Œã€å†åº¦ã‚³ãƒŸãƒƒãƒˆã—ã¦ãã ã•ã„ã€‚"
        echo ""
        echo "å¼·åˆ¶çš„ã«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹å ´åˆï¼ˆéæ¨å¥¨ï¼‰ï¼š"
        echo "  git commit --no-verify"
        exit 1
    fi
    
    echo "âœ… Markdownlintãƒã‚§ãƒƒã‚¯å®Œäº†"
fi

exit 0
